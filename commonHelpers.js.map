{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page) {\n  try {\n    const res = await axios.get('', {\n      params: {\n        key: '45125391-2052bf46b2b6e76b78c60a950',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n    return res.data;\n  } catch (err) {\n    console.log(err);\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nexport function renderImages(images, imageList) {\n  const markup = images.hits\n    .map(\n      image => `\n     <li>\n        <a class=\"gallery-link\" href=${image.largeImageURL}>\n          <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n          <div>\n            <p><span>Likes</span>${image.likes}</p>\n            <p><span>Views</span>${image.views}</p>    \n            <p><span>Comments</span>${image.comments}</p>\n            <p><span>Downloads</span>${image.downloads}</p>\n          </div>\n        </a>\n      </li>`\n    )\n    .join('');\n\n  imageList.insertAdjacentHTML('beforeend', markup);\n\n  let galleryLightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: '250',\n  });\n  galleryLightbox.refresh();\n}\n\nclass ButtonCondition {\n  constructor(btnElement, hiddenClass) {\n    this.btnElement = btnElement;\n    this.hiddenClass = hiddenClass;\n  }\n  hide() {\n    this.btnElement.classList.add(this.hiddenClass);\n  }\n  show() {\n    this.btnElement.classList.remove(this.hiddenClass);\n  }\n}\n\nclass LoaderCondition {\n  constructor(loaderEl, hideClass) {\n    this.loaderEl = loaderEl;\n    this.hideClass = hideClass;\n  }\n  hide() {\n    this.loaderEl.classList.add(this.hideClass);\n  }\n  show() {\n    this.loaderEl.classList.remove(this.hideClass);\n  }\n}\n\nexport { ButtonCondition, LoaderCondition };\n","import { fetchImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport { ButtonCondition, LoaderCondition } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// ============refs=========\n\nconst form = document.querySelector('.form');\nconst inputField = document.querySelector('.input');\nconst imageList = document.querySelector('.gallery');\nconst spinLoader = document.querySelector('.spin-loader');\nconst loadBtn = document.querySelector('.load-btn');\nconst loadMoreBtn = new ButtonCondition(loadBtn, 'is-hidden');\nconst loader = new LoaderCondition(spinLoader, 'is-hidden');\n\nlet inputValue = '';\nlet maxElements = 15;\nlet totalPages = 0;\nlet page = 1;\n\n// =======logic code=======\n\nloadMoreBtn.hide();\n\nfunction handleSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  imageList.innerHTML = '';\n\n  loader.show();\n\n  inputValue = inputField.value.trim();\n  if (inputValue === '') {\n    iziToast.warning({\n      message: 'Not value for search',\n      maxWidth: '320px',\n      position: 'topRight',\n      messageColor: 'white',\n      backgroundColor: 'orange',\n    });\n    loader.hide();\n    return;\n  }\n\n  console.log(inputValue);\n  fetchImages(inputValue, page)\n    .then(images => {\n      totalPages = Math.ceil(images.totalHits / maxElements);\n      loader.hide();\n      console.log(images);\n\n      if (images.hits.length === 0) {\n        iziToast.error({\n          maxWidth: '320px',\n          position: 'topRight',\n          messageColor: 'white',\n          backgroundColor: 'orange',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        loader.hide();\n        renderImages(images, imageList);\n      }\n\n      if (page < totalPages) {\n        loadMoreBtn.show();\n      }\n\n      if (images.hits.length < maxElements) {\n        loadMoreBtn.hide();\n      }\n\n      if (inputValue === '') {\n        loader.hide();\n        return;\n      }\n    })\n\n    .catch(error => {\n      console.log(error);\n      iziToast.error({\n        maxWidth: '320px',\n        position: 'topRight',\n        messageColor: 'white',\n        backgroundColor: 'orange',\n        message: 'Error',\n      });\n    });\n  form.reset();\n}\n\nasync function handleLoadMore() {\n  page += 1;\n\n  try {\n    const nextPage = await fetchImages(inputValue, page);\n    renderImages(nextPage, imageList);\n\n    const galleryCard = document.querySelector('.gallery li');\n    const cardHeight = galleryCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      behavior: 'smooth',\n    });\n    console.log(cardHeight);\n    if (page >= totalPages) {\n      loadMoreBtn.hide();\n      iziToast.warning({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        maxWidth: '320px',\n        backgroundColor: 'orange',\n      });\n    }\n  } catch (err) {\n    console.log(err);\n  }\n}\n\nform.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', async () => {\n  loader.show();\n  await handleLoadMore();\n  loader.hide();\n});\n"],"names":["axios","fetchImages","query","page","err","renderImages","images","imageList","markup","image","SimpleLightbox","ButtonCondition","btnElement","hiddenClass","LoaderCondition","loaderEl","hideClass","form","inputField","spinLoader","loadBtn","loadMoreBtn","loader","inputValue","maxElements","totalPages","handleSubmit","event","iziToast","error","handleLoadMore","nextPage","cardHeight"],"mappings":"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"}